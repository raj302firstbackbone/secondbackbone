<!DOCTYPE html>
<html>
<head>
  <title>Hello World in Backbone.js</title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
</head>
<body>
  <!-- ========= -->
  <!-- Your HTML -->
  <section id="main"></section>
  <!-- ========= -->

  <!-- ========== -->
  <!-- The underlying section contains all the templates used in the application -->
  <section id="templates_used">
    <script type="text/template" id="template_for_users">
    <div class="users_data">
        <label id="id_of_user"><%- id_of_user %></label>
        <label><%- name_of_user %></label>
        <label><%- email_of_user %></label>
        <button class="button" id="post_button">read posts</button>
        </div>
    </script>
  </section>
  <!-- ========== -->

  <!-- ========= -->
  <!-- Libraries -->
  <!-- ========= -->
  <script src="jquery.min.js" type="text/javascript"></script>
  <script src="underscore-min.js" type="text/javascript"></script>
  <script src="backbone-min.js" type="text/javascript"></script> 
  
  <!-- =============== -->
  <!-- Javascript code -->
  <!-- =============== -->
  <script type="text/javascript">
  var app = {};

  app.Router = Backbone.Router.extend({
    routes: {
      "": "users",
      "users/:id": "posts",
      "posts/:id": "comments"
    },
    users: function(){
      app.main_user_view = new app.Main_user_view();
    },
    posts: function(id){
      console.log("the value of the id coming in posts is"+id);
    },
    comments: function(id){
      console.log("the value of the id coming in the comments is"+id);
    }
  })

  app.usersmodel = Backbone.Model.extend({
  });
  app.UsersCollection = Backbone.Collection.extend({
    model: app.usersmodel,
    url: 'https://jsonplaceholder.typicode.com/users'
  });

  app.Main_user_view = Backbone.View.extend({
    template:_.template($('#template_for_users').html()),
    initialize: function(){
      this.render();
    },
    render: function(){
      var self = this;
      this.collection = new app.UsersCollection();
      this.collection.fetch().done(function(){
        self.collection.each(function(eachmodel){
          console.log("the value for the id is"+eachmodel.get('id'));
          self.$el.html(self.template({id_of_user: eachmodel.get('id'), name_of_user: eachmodel.get('name'), email_of_user: eachmodel.get('email')}));
          console.log(self.$el.html())
          $('#main').append(self.$el.html());
          console.log($('#users_data').html());
      return this;
        })
      })
    }
  })

  app.router = new app.Router({trigger: true});
  Backbone.history.start();

  </script>
  
</body>
</html>